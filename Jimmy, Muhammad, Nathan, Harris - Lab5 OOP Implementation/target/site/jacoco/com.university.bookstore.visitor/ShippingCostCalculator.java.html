<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ShippingCostCalculator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">bookstore-lab</a> &gt; <a href="index.source.html" class="el_package">com.university.bookstore.visitor</a> &gt; <span class="el_source">ShippingCostCalculator.java</span></div><h1>ShippingCostCalculator.java</h1><pre class="source lang-java linenums">package com.university.bookstore.visitor;

import com.university.bookstore.model.AudioBook;
import com.university.bookstore.model.EBook;
import com.university.bookstore.model.Magazine;
import com.university.bookstore.model.Material;
import com.university.bookstore.model.Media;
import com.university.bookstore.model.PrintedBook;
import com.university.bookstore.model.VideoMaterial;

/**
 * Concrete visitor implementation for calculating shipping costs.
 * Demonstrates the Visitor pattern by providing different shipping
 * cost calculations based on material type.
 * 
 * &lt;p&gt;Shipping costs vary by material type:
 * - Physical items: $0.50 per 100g
 * - Digital items: $0 (instant download)
 * - Magazines: $2 flat rate&lt;/p&gt;
 * 
 * @author Navid Mohaghegh
 * @version 2.0
 * @since 2024-09-15
 */
<span class="fc" id="L25">public class ShippingCostCalculator implements MaterialVisitor {</span>
    
    private static final double PHYSICAL_ITEM_RATE = 0.50; // per 100g
    private static final double MAGAZINE_FLAT_RATE = 2.00;
    private static final double DIGITAL_ITEM_RATE = 0.00;
    
<span class="fc" id="L31">    private double totalShippingCost = 0.0;</span>
    
    /**
     * Calculates shipping cost for a printed book based on weight.
     * Assumes average book weight of 500g.
     * 
     * @param book the printed book
     */
    @Override
    public void visit(PrintedBook book) {
        // Assume average book weight of 500g
<span class="fc" id="L42">        double weightInHundredGrams = 5.0;</span>
<span class="fc" id="L43">        double cost = weightInHundredGrams * PHYSICAL_ITEM_RATE;</span>
<span class="fc" id="L44">        totalShippingCost += cost;</span>
<span class="fc" id="L45">    }</span>
    
    /**
     * Calculates flat rate shipping cost for magazines.
     * 
     * @param magazine the magazine
     */
    @Override
    public void visit(Magazine magazine) {
<span class="fc" id="L54">        totalShippingCost += MAGAZINE_FLAT_RATE;</span>
<span class="fc" id="L55">    }</span>
    
    /**
     * Calculates shipping cost for audio books.
     * Physical CDs: weight-based, Digital: free
     * 
     * @param audioBook the audio book
     */
    @Override
    public void visit(AudioBook audioBook) {
<span class="fc bfc" id="L65" title="All 2 branches covered.">        if (audioBook.getQuality() == Media.MediaQuality.PHYSICAL) {</span>
            // Assume CD weight of 100g
<span class="fc" id="L67">            double weightInHundredGrams = 1.0;</span>
<span class="fc" id="L68">            double cost = weightInHundredGrams * PHYSICAL_ITEM_RATE;</span>
<span class="fc" id="L69">            totalShippingCost += cost;</span>
<span class="fc" id="L70">        } else {</span>
            // Digital download - no shipping cost
<span class="fc" id="L72">            totalShippingCost += DIGITAL_ITEM_RATE;</span>
        }
<span class="fc" id="L74">    }</span>
    
    /**
     * Calculates shipping cost for video materials.
     * Physical DVDs: weight-based, Digital: free
     * 
     * @param video the video material
     */
    @Override
    public void visit(VideoMaterial video) {
<span class="fc bfc" id="L84" title="All 2 branches covered.">        if (video.getQuality() == Media.MediaQuality.PHYSICAL) {</span>
            // Assume DVD weight of 150g
<span class="fc" id="L86">            double weightInHundredGrams = 1.5;</span>
<span class="fc" id="L87">            double cost = weightInHundredGrams * PHYSICAL_ITEM_RATE;</span>
<span class="fc" id="L88">            totalShippingCost += cost;</span>
<span class="fc" id="L89">        } else {</span>
            // Digital download - no shipping cost
<span class="fc" id="L91">            totalShippingCost += DIGITAL_ITEM_RATE;</span>
        }
<span class="fc" id="L93">    }</span>
    
    /**
     * Calculates shipping cost for e-books.
     * E-books are always digital downloads with no shipping cost.
     * 
     * @param ebook the e-book
     */
    @Override
    public void visit(EBook ebook) {
        // E-books are always digital - no shipping cost
<span class="fc" id="L104">        totalShippingCost += DIGITAL_ITEM_RATE;</span>
<span class="fc" id="L105">    }</span>
    
    /**
     * Gets the total shipping cost calculated so far.
     * 
     * @return the total shipping cost
     */
    public double getTotalShippingCost() {
<span class="fc" id="L113">        return totalShippingCost;</span>
    }
    
    /**
     * Resets the shipping cost calculator for a new calculation.
     */
    public void reset() {
<span class="fc" id="L120">        totalShippingCost = 0.0;</span>
<span class="fc" id="L121">    }</span>
    
    /**
     * Calculates shipping cost for a single material.
     * 
     * @param material the material to calculate shipping for
     * @return the shipping cost for this material
     */
    public double calculateShippingCost(Material material) {
<span class="fc" id="L130">        reset();</span>
        
        // Use pattern matching or instanceof to determine the correct visit method
<span class="fc bfc" id="L133" title="All 2 branches covered.">        if (material instanceof PrintedBook) {</span>
<span class="fc" id="L134">            visit((PrintedBook) material);</span>
<span class="fc bfc" id="L135" title="All 2 branches covered.">        } else if (material instanceof Magazine) {</span>
<span class="fc" id="L136">            visit((Magazine) material);</span>
<span class="fc bfc" id="L137" title="All 2 branches covered.">        } else if (material instanceof AudioBook) {</span>
<span class="fc" id="L138">            visit((AudioBook) material);</span>
<span class="fc bfc" id="L139" title="All 2 branches covered.">        } else if (material instanceof VideoMaterial) {</span>
<span class="fc" id="L140">            visit((VideoMaterial) material);</span>
<span class="fc bfc" id="L141" title="All 2 branches covered.">        } else if (material instanceof EBook) {</span>
<span class="fc" id="L142">            visit((EBook) material);</span>
        } else {
<span class="fc" id="L144">            throw new IllegalArgumentException(&quot;Unknown material type: &quot; + material.getClass().getSimpleName());</span>
        }
        
<span class="fc" id="L147">        return totalShippingCost;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>